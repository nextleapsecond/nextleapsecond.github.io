<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Next Leap Second</title>
  <link rel="stylesheet" href="main.css" />
</head>
<body>
<h1>Next Leap Second</h1>
<p id="nextWillHappenText">The next leap second will happen 2015 June 30th 23:59:60 UTC.</p>
<p id="previousLeapSecondText" style="display: none;">The last leap second happened 2015 June 30th 23:59:60 UTC. So far the next leap second has not yet been announced.</p>
<h2 id="time_left_header">Next leap second countdown timer. Time left:</h2>
<p id="countdown">0 days 0 hours 0 minutes 0 seconds</p>

<p>Leap seconds are announced by the INTERNATIONAL EARTH ROTATION AND REFERENCE SYSTEMS SERVICE (IERS)</p>

<script>
  var next_leap_second = Date.UTC(2015, 6, 1, 0, 0, 0);

  // Pad number with zeroes
  function pad(n, width, z) {
    z = z || '0';
    n = n + '';
    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
  }

  function utcTime() {
    now = new Date();

    ms_to_leap_second = next_leap_second - now;
    if ((ms_to_leap_second > -200) && !(ms_to_leap_second < -1000)) {
      displayCountdown(ms_to_leap_second);
    }
    if (ms_to_leap_second < 0) {
      document.getElementById("nextWillHappenText").setAttribute('style', "display: none;");
      document.getElementById("previousLeapSecondText").setAttribute('style', "display: block;");
    }
  }

  function displayCountdown(total_ms) {
    if(total_ms < 0) { total_ms = 0; } // avoid negative numbers
    days = daysRemain(total_ms/1000);
    hours = hoursRemain(total_ms/1000);
    mins = minsRemain(total_ms/1000);
    secs = secsRemain(total_ms/1000);
    ms = total_ms - Math.floor(total_ms/1000)*1000;
    buf = days + " days, " + hours + " hours, " + mins + " minutes, " + secs+"."+ pad(ms,3) + " seconds ";
    document.getElementById("countdown").innerHTML = buf;
  }

  function daysRemain(secs) { return Math.floor(secs/86400); }
  function hoursRemain(secs) {
    rest = secs - daysRemain(secs)*86400;
    return Math.floor(rest/3600);
  }
  function minsRemain(secs) {
    rest = secs - daysRemain(secs)*86400;
    rest = rest - hoursRemain(secs)*3600;
    return Math.floor(rest/60);
  }
  function secsRemain(secs) {
    rest = secs - daysRemain(secs)*86400;
    rest = rest - hoursRemain(secs)*3600;
    rest = rest - minsRemain(secs)*60;
    return Math.floor(rest);
  }

  setInterval(utcTime, 50);
</script>

<div class="ads">
  <iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ss&ref=ss_til&ad_type=product_link&tracking_id=nxtlp-20&marketplace=amazon&region=US&placement=B000GAWSDG&asins=B000GAWSDG&linkId=DKYYEIFIB7PWW3K6&show_border=true&link_opens_in_new_window=true">
</iframe>
<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ss&ref=ss_til&ad_type=product_link&tracking_id=nxtlp-20&marketplace=amazon&region=US&placement=B008A7JEXO&asins=B008A7JEXO&linkId=H4N253WSX3HFKGMM&show_border=true&link_opens_in_new_window=true">
</iframe>
<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ss&ref=ss_til&ad_type=product_link&tracking_id=nxtlp-20&marketplace=amazon&region=US&placement=B0058W8Z1G&asins=B0058W8Z1G&linkId=SOK5KHX5DZ4VMMAC&show_border=true&link_opens_in_new_window=true">
</iframe>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-728853-8', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
